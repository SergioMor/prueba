id: landing_pages
dependencies:
  enforced:
    module:
      - paragraph_migration
source:
  plugin: csv
  path: "modules/custom/paragraph_migration/assets/csv/landing_pages.csv"
  header_row_count: 1
  keys:
    - id
destination:
  plugin: entity:node
  default_bundle: landing_page
process:
  title: title
  field_banner/target_id:
    -
      plugin: migration
      migration: banner
      no_stub: true
      source: id
    -
      plugin: extract
      index:
        - '0'
  field_image/target_revision_id:
    -
      plugin: migration
      migration: banner
      no_stub: true
      source: id
    -
      plugin: extract
      index:
        - 1
  field_tile:
    -
      plugin: migration
      migration:
        - tile_1
        - tile_2
        - tile_3
      no_stub: true
      source_ids:
        tile_1:
          - id
          - img1
        tile_2:
          - id
          - img2
        tile_3:
          - id
          - img1
    -
      plugin: iterator
      process:
        target_id: '0'
        target_revision_id: 1
migration_dependencies:
  required:
    - banner
    - tile_1
    - tile_2
    - tile_3